{% extends 'shiptable/index.html.twig' %}

{% block title %}
    {{ rus_turnir.russianalias }} {{ app.request.get('season') }}
{% endblock %}

{% block description %}
    <meta name="description" content="еврокубки, {{ rus_turnir }} {{ app.request.get('season') }},
          матчи, авторы забитых мячей">
{% endblock %}

{% block sidebar %}
 {% endblock %}


{% block teams %}
{% if app.request.get('turnir') == 'leagueChampions' %}
<div class="teams-list">{{ app.request.get('team') }}
  {% for team in teams %}
    {% if team.team.translit != app.request.get('id') %}
      <a href="{{ path('eurocup_show', {'season': app.request.get('season'),
          'id': team.team.translit, 'turnir': app.request.get('turnir')}) }}"
        class="">
        {% if team.team.image2 %}
          <img src="{{ path_public }}{{ asset('images/clubs/') }}{{ team.team.image2 }}"
            alt="{{ team.team.name }}" title="{{ team.team.name }}" />
        {% else %}
              {{ team.team.name }}
        {% endif %}
      </a>
    {% endif %}
  {% endfor %}
</div>
{% endif %}
{% endblock %}

{% block content %}

{% block seasons %}
    {% for season in seasons %}
        {% if app.request.get('season') == season.season.name %}
            <b>{{ season.season.name }}</b>
        {% else %}
            <a href="{{ path('eurocup', {'turnir': app.request.get('turnir'),
                'season': season.season.name }) }}" class="spiski">
                {{ season.season.name }}</a>
        {% endif %}
    {% endfor %}
{% endblock %}

<h1>{{ rus_turnir.russianalias }} {{ app.request.get('season') }}</h1>
        {% if is_granted("ROLE_ADMIN") %}
        <p><a href="{{ path('eurocup_newMatch', {'season': app.request.get('season')}) }}">
                Добавить матч</a></p>
         {% endif %}
         <table>
         {% for stad in stadies %}
             <tr class="shipTableTitle">
                   <td colspan="4" class="tableGoal">{{ stad.name }}</td>
             </tr>
           {% for entity in stad.stadiamatches %}
             <tr class="odd">
                 <td class="ec-date">
                     <div class="">
                         {% if is_granted("ROLE_ADMIN") %}
                         <a href="{{ path('eurocup_editMatch', {'id': entity.id,
                           'turnir': app.request.get('turnir') })}}">
                               {{ entity.data | date('d.m H:i') }}</a>
                         {% else %}
                               {% if entity.status == 1 %}
                                 {{ entity.data | date('d.m H:i') }}
                               {% else %}
                                   {{ entity.data | date('d.m') }}
                               {% endif %}
                         {% endif %}
                     </div>
                 </td>
                 <td class="scMatch">
                     <div>
                       <a href="{{ path('team_show', {'code': entity.team.translit}) }}" class="spiski">{{ entity.team.name }}</a>
                       ({{ entity.team.country.name }})
                        -
                        <a href="{{ path('team_show', {'code': entity.team.translit}) }}" class="spiski">{{ entity.team2.name }}</a>
                        ({{ entity.team2.country.name }})
                     </div>
                 </td>
                 <td class="scScore">
                    {% if entity.status == 1 %}
                      {% if is_granted("ROLE_ADMIN") %}
                        <a href="{{ path('eurocup_edit', {'id': entity.id,
                          'turnir': app.request.get('turnir') })}}">
                          -:-</a>
                      {% else %}
                        -:-
                      {%  endif %}
                    {% else %}
                      {{ entity.score }}
                    {% endif %}
                 </td>
                 <td class="scBomb">
                     {{ entity.bomb }}
                 </td>
             </tr>
             {% if entity.ecsostav %}
             <tr>
                 <td colspan="4" class="even">
                     <p><em><b>{{ entity.team.name }}</b></em>: {{ entity.ecsostav.team }}</p>
                     <p><em><b>{{ entity.team2.name }}</b></em>: {{ entity.ecsostav.team2 }}</p>
                 </td>
             </tr>
             {% endif %}
          {% endfor %}
        {% if stad.stadiatable %}
          <tr>
            <td colspan="4" class="even">
              <table class="shipTable">
                <thead>
                  <tr class="shipTableTitle">
                      <th>&nbsp;</th>
                      <th>И</th>
                      <th>В</th>
                      <th>Н</th>
                      <th>П</th>
                      <th>M</th>
                      <th>О</th>

                  </tr>
                </thead>
                <tbody>
                 {% for ectable in stad.stadiatable %}
                      <tr class="{{ cycle(['odd', 'even'], loop.index) }}">
                      <td class="tableLeft">
                        <a href="{{ path('eurocup_show', {'id': ectable.team.translit,
                          'season': app.request.get('season'), 'turnir': app.request.get('turnir')}) }}"
                              class="shipTableTeam">
                              {{ ectable.team.name }}
                        </a>
                        {% if is_granted("ROLE_ADMIN") %}
                          <a href="{{ path('ectable_edit', {
                           'id': ectable.id, 'season': app.request.get('season'),
                           'turnir': app.request.get('turnir'),
                           'stadia': app.request.get('stadia')
                          }) }}">=</a>
                        {% endif %}
                      </td>
                      <td class="shipTableParams">{{ ectable.wins+ectable.nich+ectable.porazh }}</td>
                      <td class="shipTableParams">{{ ectable.wins }}</td>
                      <td class="shipTableParams">{{ ectable.nich }}</td>
                      <td class="shipTableParams">{{ ectable.porazh }}</td>
                      <td>{{ ectable.mz }}-{{ ectable.mp }}</td>
                      <td class="shipTableParams"><b>{{ ectable.score }}</b></td>

                  </tr>
                  {% endfor %}
                </tbody>
              </table>
              </td>
          </tr>
        {% endif %}
    {% endfor %}


    </table>
    <br/>
    {% if is_granted("ROLE_ADMIN") %}
      <p><a href="{{ path('eurocup_newSeason', {'turnir': app.request.get('turnir'),
      'season': app.request.get('season')
      }) }}">Добавить сезон</a></p>
    {% endif %}


 {% endblock %}
