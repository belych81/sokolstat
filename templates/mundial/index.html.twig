{% extends 'shiptable/index.html.twig' %}

{% block title %}
    {{ champ.russianAlias }} {{ app.request.get('year') }}
{% endblock %}

{% block description %}
    <meta name="description" content="чемпионат {{ champ.russianAlias }} {{ app.request.get('year') }},
          бомбардиры, турнирная таблица, матчи">
{% endblock %}

{% block seasons %}
    {% for season in seasons %}
        {% if app.request.get('year') == season.name %}
            <strong>{{ season.name }}</strong>
        {% else %}
          <a href="{{ path('sbornie', {'turnir': app.request.get('turnir'),
            'year': season.name}) }}" class="spiski">
              {{ season.name }}</a>
        {% endif %}
    {% endfor %}
{% endblock %}

{% block content %}

    <h1>{{ champ.russianAlias }} {{ app.request.get('year') }}</h1>
    {% if is_granted("ROLE_ADMIN") %}
        <p><a href="{{ path('sbornie_newMatch', {'season': app.request.get('year'),
          'turnir': app.request.get('turnir')}) }}">
                Добавить матч</a></p>
         {% endif %}
    <table>
        {% for raund in raunds %}
            <tr class="shipTableTitle">
                <td colspan="5" class="tableGoal">
                    {{ raund.name }}
                </td>
            </tr>
            {% for entity in raund.stadiamatches %}
                <tr class="{{ cycle(['odd', 'even'], loop.index) }}">
                <td class="scMatch">
                    <a href="{{ path('sbornie_show', {'turnir': app.request.get('turnir'),
                     'year': app.request.get('year'), 'id': entity.id})}}" class="spiski">
                        {{ entity.country.name }} - {{ entity.country2.name }}</a>
                </td>
                <td class="scScore">
                        {{ entity.data | date('d.m H:i') }}
                </td>
                <td class="scScore">
                        {{ entity.score }}
                </td>
                <td class="scCity scScore">
                        {{ entity.city.name }}
                </td>
                <td class="mundialGoal">
                    {{ entity.goal }}
                </td>
                </tr>
            {% endfor %}
            {% if raund.stadiatable %}
              <tr>
                <td colspan="5" class="even">
                  <table class="shipTable">
                    <thead>
                      <tr class="shipTableTitle">
                          <th>&nbsp;</th>
                          <th>И</th>
                          <th>В</th>
                          <th>Н</th>
                          <th>П</th>
                          <th>M</th>
                          <th>О</th>

                      </tr>
                    </thead>
                    <tbody>
                     {% for ectable in raund.stadiatable %}
                          <tr class="{{ cycle(['odd', 'even'], loop.index) }}">
                          <td class="tableLeft">
                            <span class="shipTableTeam">
                                  {{ ectable.country.name }}
                            </span>
                          </td>
                          <td class="shipTableParams">{{ ectable.wins+ectable.nich+ectable.porazh }}</td>
                          <td class="shipTableParams">{{ ectable.wins }}</td>
                          <td class="shipTableParams">{{ ectable.nich }}</td>
                          <td class="shipTableParams">{{ ectable.porazh }}</td>
                          <td>{{ ectable.mz }}-{{ ectable.mp }}</td>
                          <td class="shipTableParams"><b>{{ ectable.score }}</b></td>

                      </tr>
                      {% endfor %}
                    </tbody>
                  </table>
                  </td>
              </tr>
            {% endif %}
        {% endfor %}
    </table>

    <br/>
    {% if is_granted("ROLE_ADMIN") %}
      <p><a href="{{ path('sbornie_newSeason', {'turnir': app.request.get('turnir'),
      'season': app.request.get('year')
      }) }}">Добавить сезон</a></p>
    {% endif %}
    {% endblock %}
