{% extends 'shiptable/index.html.twig' %}

{% block title %}
   {{ club.0.name }} - {{ app.request.get('season') }}
{% endblock %}

{% block description %}
    <meta name="description" content="{{ club.0.name }} {{ app.request.get('season') }},
          авторы забитых мячей">
{% endblock %}

{% block zagolovok %}
{% endblock %}

{% block seasons %}

    {% for season in seasons %}
        {% if app.request.get('season') == season.season.name %}
            <b>{{ season.season.name }}</b>
        {% else %}
            <a href="{{ path('championships', {'country': app.request.get('country'), 'season': season.season.name}) }}" class="spiski">{{ season.season.name }}</a>
        {% endif %}
    {% endfor %}

{% endblock %}

{% block content %}


                <h1>{{ club.0.name }}</h1>

    {% block playersTeam %}
    <div class="champ-teams-list">
    <table class="champ-show-table">
        <thead>
            <tr class="shipTableTitle">
                <th>&nbsp;</th>
                <th class="teamStatPlayer">&nbsp;</th>
                <th class="teamStatGoal">Г</th>
                <th class="teamStatGoal">В сезоне</th>
                <th class="teamStatGoal">Всего в чемпионатах топ-5</th>
                <th class="teamStatGoal">Всего за клубы топ-5</th>
            </tr>
        </thead>
        <tbody>
        {% for player in players %}
            <tr class="{{ cycle(['odd', 'even'], loop.index) }}">
                <td class="player-position">{{ loop.index }}</td>
                <td class="spiski">
                    <a href="{{ path('player_show', {'id': player.player.translit}) }}" class="spiski">{{ player.player.name }}</a>
                </td>
                <td class="tableGoal">
                   {% if is_granted("ROLE_ADMIN") %}
                       <a href="{{ path('playeradmin_editNation',
                 {'id': player.id, 'season': app.request.get('season'),
                    'team': app.request.get('id'),
                    'country': app.request.get('country'), 'change': 'minus'}) }}">-</a>
                           {{ player.goal }}
                           <a href="{{ path('playeradmin_editNation',
                 {'id': player.id, 'season': app.request.get('season'),
                    'team': app.request.get('id'),
                    'country': app.request.get('country'), 'change': 'plus'}) }}">+</a>
                   {% else %}
                   {{ player.goal }}
                   {% endif %}</td>
                <td class="tableGoal">
                    {{ player.sum }}
                </td>
                <td class="tableGoal">
                    {{ player.player.goal }}
                </td>
                <td class="tableGoal">
                    {{ player.player.sum }}
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
     {% if is_granted("ROLE_ADMIN") %}
        <a href="{{ path('player_newChampNation', {'season': app.request.get('season'),
        'country': app.request.get('country'), 'team': app.request.get('id')}) }}">
            Добавить игрока</a>
            <a href="{{ path('playeradmin_editPlayerTurnirs', {'season': app.request.get('season'),
        'country': app.request.get('country'), 'team': app.request.get('id')}) }}">
            Обновить игрока</a>
        {% endif %}
</div>
<div class="champ-teams-list">
    {% for team in teams %}
    <p><a href="{{ path('championships_show', {'season': app.request.get('season'),
     'id': team.translit, 'country': app.request.get('country')}) }}" class="spiski">
            {{ team.name }}</a></p>
    {% endfor %}
</div>
    {% endblock %}
{% endblock %}
